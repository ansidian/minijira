/* Mobile Responsive Styles */
@media (max-width: 768px) {
  /* Header adjustments */
  .header {
    padding: 12px 12px 0 12px;
    padding-top: max(12px, var(--safe-top));
    padding-left: max(12px, var(--safe-left));
    padding-right: max(12px, var(--safe-right));
    flex-wrap: wrap;
    height: auto;
    min-height: var(--header-height);
    justify-content: space-between;
  }

  .logo {
    font-size: 16px;
    gap: 8px;
    display: flex;
    align-items: center;
  }

  .logo-text {
    font-size: 16px;
  }

  .logo-icon {
    width: 24px;
    height: 24px;
    font-size: 12px;
  }

  .hamburger-button {
    min-width: 44px;
    min-height: 44px;
  }

  /* Hide desktop header-right on mobile */
  .header-right {
    display: none;
  }

  .header-right-mobile {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  /* hide stats on very small screens, show on slightly larger */
  .header-stats {
    display: none;
    gap: 12px;
    font-size: 11px;
  }

  .stat {
    gap: 4px;
  }

  .stat-value {
    font-size: 12px;
  }

  /* reduce space of user selector  */
  .user-selector {
    gap: 6px;
  }

  .user-select {
    min-width: 100px;
    max-width: 120px;
    padding: 6px 8px;
    font-size: 12px;
  }

  /* Search button - show only icon on mobile */
  .search-button {
    min-width: auto;
    padding: 8px;
  }

  .search-text,
  .search-shortcut {
    display: none;
  }

  .search-icon {
    width: 18px;
    height: 18px;
  }

  /* Main container - stack board and indicators vertically */
  .main {
    flex-direction: column;
  }

  /* Mobile board - horizontal scroll snap */
  .board {
    padding: 12px 0; /* Remove horizontal padding, columns handle it */
    gap: 0; /* No gap between columns */
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
    overflow-y: hidden;
    /* Hide scrollbar */
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .board::-webkit-scrollbar {
    display: none;
  }

  /* Mobile columns - full width with peek */
  .column {
    flex: 0 0 calc(100vw - 48px); /* Full width minus peek space (24px each side) */
    min-width: calc(100vw - 48px);
    max-width: calc(100vw - 48px);
    scroll-snap-align: center;
    scroll-snap-stop: always; /* CRITICAL: Prevents flick-to-end on iOS Safari */
    margin: 0;
    border-radius: var(--radius-lg);
  }

  /* First column has left margin for peek */
  .column:first-child {
    margin-left: 24px;
  }

  /* Last column has right margin for peek */
  .column:last-child {
    margin-right: 24px;
  }

  /* Gap between columns */
  .column:not(:last-child) {
    margin-right: 12px;
  }

  /* Sticky column header */
  .column-header {
    position: sticky;
    top: 0;
    background: var(--bg-secondary);
    z-index: 5;
    padding: 12px 16px;
  }

  .column-title {
    font-size: 13px;
  }

  .column-count {
    font-size: 11px;
  }

  /* simplified footer on mobile */
  .footer {
    padding: 10px 12px;
  }

  .footer-content {
    font-size: 10px;
    gap: 8px;
  }

  /* hide some footer items on small screens */
  .footer-section:nth-child(5),
  .footer-section:nth-child(6),
  .footer-divider:nth-child(4) {
    display: none;
  }

  .footer-icon {
    width: 12px;
    height: 12px;
  }

  .comment {
    padding: 10px;
  }

  .comment-author {
    font-size: 12px;
  }

  .comment-body {
    font-size: 12px;
  }

  .user-prompt-overlay {
    padding: 70px 12px 0 0;
  }

  .user-prompt-message {
    font-size: 12px;
    padding: 10px 16px;
  }

  /* ========================================
     TOUCH TARGET SIZING (44px minimum)
     ======================================== */

  /* All buttons and interactive elements */
  button,
  [role="button"],
  .mantine-ActionIcon-root,
  .mantine-Button-root {
    min-height: 44px;
    min-width: 44px;
  }

  /* Issue cards - full width with proper padding */
  .issue-card {
    min-height: 44px;
    padding: 12px;
    cursor: pointer;
  }

  /* Subtask expansion chevron - expand hit area */
  .subtask-toggle-btn {
    min-width: 44px;
    min-height: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Priority badges - keep visual size, expand tap area */
  .priority-badge,
  .status-badge {
    position: relative;
    /* Visual size stays same, hit area expands via pseudo-element */
  }

  .priority-badge::before,
  .status-badge::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 44px;
    height: 44px;
    /* Invisible but clickable */
  }

  /* Avatar buttons in cards */
  .avatar-button {
    min-width: 44px;
    min-height: 44px;
  }

  /* better touch targets */
  .add-issue-btn {
    min-height: 44px;
    font-size: 14px;
  }

  /* Select dropdowns */
  .user-select,
  .mantine-Select-input {
    min-height: 44px;
  }

  /* Close buttons on modals */
  .mantine-Modal-close,
  .mantine-Drawer-close {
    min-width: 44px;
    min-height: 44px;
  }

  /* Filter panel checkboxes and labels */
  .mantine-Checkbox-root {
    min-height: 44px;
  }

  .mantine-Checkbox-label {
    padding: 12px 0;
  }

  /* prevent text size adjustment on orientation change */
  body {
    -webkit-text-size-adjust: 100%;
  }

  /* ========================================
     TAP FEEDBACK (iOS-style scale effect)
     ======================================== */

  /* Issue card tap feedback */
  .issue-card {
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
    -webkit-tap-highlight-color: transparent; /* Remove default tap highlight */
  }

  .issue-card:active {
    transform: scale(0.98);
  }

  /* Subtask card tap feedback */
  .subtask-card {
    transition: transform 0.1s ease-out;
    -webkit-tap-highlight-color: transparent;
  }

  .subtask-card:active {
    transform: scale(0.98);
  }

  /* Button tap feedback */
  .add-issue-btn {
    transition: transform 0.1s ease-out;
  }

  .add-issue-btn:active {
    transform: scale(0.98);
  }

  /* Prevent text selection on tap */
  .issue-card,
  .subtask-card {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Column indicators (dot pagination) */
  .column-indicators {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    padding: 12px 0;
    background: var(--bg-primary);
  }

  .column-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--border-secondary);
    transition: all 0.2s ease;
  }

  .column-dot-active {
    width: 8px;
    height: 8px;
    background: var(--accent);
  }
}

/* show stats on tablet and small desktops */
@media (min-width: 480px) and (max-width: 768px) {
  .header-stats {
    display: flex;
  }

  .header-right {
    flex-wrap: wrap;
  }
}

/* allow 2 columns on tablet landscape */
@media (min-width: 600px) and (max-width: 1024px) {
  .column {
    flex: 0 0 calc(50% - 12px);
    min-width: 280px;
  }
}

/* show more columns on larger tablets and small laptops */
@media (min-width: 1024px) {
  .column {
    flex: 1;
    min-width: 320px;
  }
}

@media (max-width: 768px) {
  .subtask-toggle-mobile {
    display: inline-flex;
  }

  .subtask-toggle-desktop {
    display: none;
  }
}

/* Hide hints on mobile */
@media (max-width: 768px) {
  .hints-container {
    display: none;
  }
}

/* Hide column indicators on desktop */
@media (min-width: 769px) {
  .column-indicators {
    display: none;
  }

  /* Ensure header-right-mobile hidden on desktop */
  .header-right-mobile {
    display: none;
  }
}
